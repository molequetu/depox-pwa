(this.webpackJsonpdepo=this.webpackJsonpdepo||[]).push([[9],{399:function(e,t,n){"use strict";n.r(t);var c=n(125),o=n.n(c),r=n(369),a=n(38),s=n(18),i=n(0),u=n(140),d=n(123),l=n.n(d),j=n(127),b=n.n(j),h=n(145),f=n(392),p=n(393),m=n(395),O=n(397),x=n(398),v=n(394),k=n(396),w=n(371),g=n.n(w),y=n(370),S=n.n(y),M=n(113),D=n(147),T=Object(h.a)((function(e){return{paper:{padding:"6px 16px"},secondaryTail:{backgroundColor:e.palette.secondary.main}}}));function B(e){var t=T();return Object(s.jsx)(f.a,{align:"alternate",children:e.stocks&&e.stocks.map((function(e){return Object(s.jsxs)(p.a,{children:[Object(s.jsx)(v.a,{children:Object(s.jsx)(D.a,{variant:"body2",color:"textSecondary",children:(n=e.createdAt,new Date(n).toLocaleTimeString())})}),Object(s.jsxs)(m.a,{children:[0===e.actionType?Object(s.jsxs)(k.a,{color:"primary",children:[" ",Object(s.jsx)(S.a,{})," "]}):Object(s.jsx)(k.a,{color:"secondary",children:Object(s.jsx)(g.a,{})}),Object(s.jsx)(O.a,{})]}),Object(s.jsx)(x.a,{children:Object(s.jsx)(M.a,{elevation:3,className:t.paper,children:Object(s.jsxs)(D.a,{variant:"h6",component:"h1",children:[e.item.code," \u2192 ",e.bin.code," : ",e.quantity]})})})]},e.id);var n}))})}var E=n(124),A=n(372);t.default=function(){var e=Object(i.useState)(null),t=Object(a.a)(e,2),n=t[0],c=t[1],d=Object(u.a)(),j=function(){if(!("indexedDB"in window))return null;return Object(A.a)("depo",1,{upgrade:function(e){if(!e.objectStoreNames.contains("stockMovements"))e.createObjectStore("stockMovements",{keyPath:"id"})}})}(),h=function(){var e=Object(r.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("".concat(E.a.apiURL+"Stocks")).then((function(e){return console.log(e),e.json()})).then((function(e){c(e),f(e)})).catch((function(e){console.error("Error while getting stock movements, will render local stored data:",e),p().then((function(e){e.length&&c(e.reverse())}))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function f(e){return"indexedDB"in window?j.then((function(t){var n=t.transaction("stockMovements","readwrite"),c=n.objectStore("stockMovements");return Promise.all(e.map((function(e){return c.put(e)}))).catch((function(){throw n.abort(),Error("Stock movements were not added to the store")}))})):null}function p(){return"indexedDB"in window?j.then((function(e){return e.transaction("stockMovements","readonly").objectStore("stockMovements").getAll()})):null}return Object(i.useEffect)((function(){h()}),[]),Object(s.jsx)(l.a,{pageTitle:d.formatMessage({id:"stockmovements",defaultMessage:"Stock Movements"}),children:Object(s.jsx)(b.a,{children:Object(s.jsx)(B,{stocks:n})})})}}}]);
//# sourceMappingURL=9.2d2a1245.chunk.js.map